{"version":3,"sources":["images/logo.svg","components/Header.js","images/delete-icon.svg","contexts/CurrentUserContext.js","components/Card.js","images/editAvatar.svg","components/Main.js","components/ImagePopup.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/Login.js","components/Register.js","components/Footer.js","components/ProtectedRoute.js","utils/api.js","components/InfoTooltip.js","utils/auth.js","images/registration-ok.svg","images/login-fail.svg","components/App.js","index.js"],"names":["Header","loggedIn","email","handleSignOut","pathname","useLocation","text","linkRoute","className","src","logo","alt","to","onClick","CurrentUserContext","React","createContext","Card","card","onCardClick","onCardLike","onCardDelete","currentUser","useContext","isOwn","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","item","cardLikeButtonClassName","deleteIcon","link","name","width","height","viewBox","fill","xmlns","d","length","Main","onEditProfile","onAddPlace","onEditAvatar","cards","avatar","editAvatar","type","about","map","ImagePopup","onClose","PopupWithForm","title","children","isOpen","handleSubmit","buttonSubmitText","noValidate","onSubmit","value","EditProfilePopup","onUpdateUser","useState","setName","description","setDescription","useEffect","e","preventDefault","minLength","maxLength","id","placeholder","defaultValue","onChange","evt","target","required","EditAvatarPopup","onUpdateAvatar","avatarInput","useRef","current","ref","AddPlacePopup","nameInput","linkInput","Login","authorization","valueEmail","setValueEmail","valuePassword","setValuePassword","Register","registration","Footer","ProtectedRoute","Component","component","props","api","baseUrl","headers","this","_baseUrl","_headers","fetch","then","response","_checkRequestResult","method","body","JSON","stringify","cardId","profession","urlAvatar","console","log","ok","json","Promise","reject","status","error","localStorage","getItem","InfoTooltip","message","iconPath","BASE_URL","getContent","token","res","data","escapeHtml","require","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isInfoTooltipPopupOpen","setIsInfoTooltipPopupOpen","selectedCard","setSelectedCard","setCurrentUser","setLoggedIn","setMessage","setEmail","history","useHistory","handleInfoTooltipPopupOpen","handleInfoTooltipContent","closeAllPopups","getUserInfo","user","catch","errorHandler","jwt","Auth","push","err","getInitialCards","cardList","setCards","hadleEscClose","key","document","addEventListener","removeEventListener","Provider","removeItem","updateHeaders","exact","path","i","unlikeCard","likeCard","newCard","newCards","c","deleteCard","filter","password","Error","setItem","registrationOk","setTimeout","registrationNoOK","editUserInfo","updatedUser","addCard","editUserAvatar","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.21893e12.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.c2821b38.svg\";","import logo from '../images/logo.svg';\r\nimport { Link, useLocation } from 'react-router-dom';\r\n\r\nfunction Header({loggedIn, email, handleSignOut}) {\r\n  const { pathname } = useLocation();\r\n  const text = `${pathname === '/sign-in' ? 'Регистрация' : 'Войти'}`;\r\n  const linkRoute = `${pathname === '/sign-in' ? '/sign-up' : '/sign-in'}`;\r\n  \r\n\r\n  \r\n  return (\r\n    <header className=\"header\">\r\n      <img src={logo} alt=\"Логотип Место\" className=\"header__logo\" />\r\n      <div className=\"header__wrap\">\r\n        {loggedIn ? (\r\n          <>\r\n            <p className=\"header__email\">{email}</p>\r\n            <Link className=\"header__signout\" to=\"\" onClick={handleSignOut}>Выйти</Link>\r\n          </>) : (<Link to={linkRoute} className=\"header__link\">{text}</Link>)\r\n        }\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default Header;","export default __webpack_public_path__ + \"static/media/delete-icon.e3c42771.svg\";","import React from 'react';\r\n\r\nexport const CurrentUserContext = React.createContext();\r\n","import deleteIcon from '../images/delete-icon.svg';\r\nimport React from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction Card({card, onCardClick, onCardLike, onCardDelete}) {\r\n\r\n  // Контекст\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  // Определяем, являемся ли мы владельцем текущей карточки\r\n  const isOwn = card.owner === currentUser._id;\r\n\r\n  // Создаём переменную, которую после зададим в `className` для кнопки удаления\r\n  const cardDeleteButtonClassName = (\r\n    `${isOwn ? 'grid-item__delete-icon' : 'grid-item__delete-icon_hidden'}`\r\n  ); \r\n\r\n  // Определяем, есть ли у карточки лайк, поставленный текущим пользователем\r\n  const isLiked = card.likes.some(item => item === currentUser._id);\r\n\r\n  // Создаём переменную, которую после зададим в `className` для кнопки лайка\r\n  const cardLikeButtonClassName = `grid-item__like ${isLiked ? 'grid-item__like_liked' : ''}`; \r\n\r\n  function handleClick() {\r\n    onCardClick(card);\r\n  } \r\n\r\n  function handleLikeClick () {\r\n    onCardLike(card);\r\n  }\r\n\r\n  function handleDeleteClick() {\r\n    onCardDelete(card);\r\n  }\r\n\r\n  return (\r\n    <li className=\"grid-item\">\r\n      <img src={deleteIcon} alt=\"Удаление карточки\" className={cardDeleteButtonClassName} onClick={handleDeleteClick} />\r\n      <img src={card.link} alt={card.name} className=\"grid-item__image\" onClick={handleClick} />\r\n      <div className=\"grid-item__wrap\">\r\n        <h3 className=\"grid-item__name\">{card.name}</h3>\r\n        <div className=\"grid-item__like-container\">\r\n          <svg className={cardLikeButtonClassName} width=\"21\" height=\"19\" viewBox=\"0 0 21 19\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" onClick={handleLikeClick}>\r\n            <path  d=\"M19.154 9.33822C21.294 7.19832 21.294 3.72364 19.154 1.60492C17.014 -0.534975 13.5392 -0.534975 11.3992 1.60492L10.361 2.66428L9.32276 1.62611C7.18277 -0.534975 3.70792 -0.534975 1.58911 1.60492C0.550891 2.64309 0 4.02026 0 5.48217C0 6.94408 0.572079 8.32124 1.58911 9.35941L10.361 18.1309L19.154 9.33822Z\" />\r\n          </svg>\r\n          <p className=\"grid-item__like-counter\">{card.likes.length}</p>\r\n        </div>\r\n      </div>\r\n    </li>\r\n  )\r\n}\r\n\r\nexport default Card;","export default __webpack_public_path__ + \"static/media/editAvatar.ae1a976d.svg\";","import React from 'react';\r\nimport Card from './Card';\r\nimport editAvatar from '../images/editAvatar.svg';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction Main({onEditProfile, onAddPlace, onEditAvatar, onCardClick, cards, onCardLike, onCardDelete}) {\r\n\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  return (\r\n    <main className=\"content\">\r\n      <section className=\"profile\">\r\n          <div className=\"profile__container\">\r\n            <div className=\"profile__avatar-wrapp\">\r\n              <img src={currentUser.avatar} alt=\"Аватар профиля\" className=\"profile__avatar\" />\r\n              <img src={editAvatar} alt=\"Смена аватара\" className=\"profile__avatar-edit\" onClick={onEditAvatar}/>\r\n            </div>\r\n            <div className=\"profile__info\">\r\n              <div className=\"profile__wrap\">\r\n                <h1 className=\"profile__name\">{currentUser.name}</h1>\r\n                <button type=\"button\" className=\"profile__edit-button\" onClick={onEditProfile} />\r\n              </div>\r\n              <p className=\"profile__profession\">{currentUser.about}</p>\r\n            </div>\r\n          </div>\r\n          <button type=\"button\" className=\"profile__add-button\" onClick={onAddPlace} />\r\n      </section>\r\n    \r\n      <section className=\"photos\">\r\n        <ul className=\"grid-photos\">\r\n          {cards.map((card) => <Card  \r\n            key={card._id} \r\n            card={card} \r\n            onCardClick={onCardClick}\r\n            onCardLike={onCardLike}\r\n            onCardDelete={onCardDelete}/>\r\n          )}\r\n        </ul>\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default Main;","function ImagePopup({card, onClose}) {\r\n\r\n  return (\r\n    <div className={`popup popup_type_image ${card ? 'popup_opened' : ''}`}>\r\n      <div className=\"popup__wrap\">\r\n        <img src={card.link} alt={card.name} className=\"popup__image\" />\r\n        <p className=\"popup__title-image\">{card.name}</p>\r\n        <button type=\"button\" className=\"popup__button-close\" onClick={onClose} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ImagePopup;","function PopupWithForm({name, title, children, isOpen, onClose, handleSubmit, buttonSubmitText}) {\r\n\r\n  return (\r\n      <div className={`popup popup_type_${name} ${isOpen ? 'popup_opened' : ''}`}>\r\n        <div className=\"popup__container\">\r\n          <h4 className=\"popup__title\">{title}</h4>\r\n          <form className=\"popup__form\" name={name} noValidate onSubmit={handleSubmit}>\r\n            {children}\r\n            <input type=\"submit\" className=\"popup__button-save\" name=\"submit\" value={buttonSubmitText} />\r\n          </form>\r\n          <button type=\"button\" className=\"popup__button-close\"  onClick={onClose} />\r\n        </div>\r\n      </div>\r\n  );\r\n}\r\n\r\nexport default PopupWithForm;","import React from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction EditProfilePopup({isOpen, onClose, onUpdateUser}) {\r\n  const [name, setName] = React.useState('');\r\n  const [description, setDescription ] = React.useState('');\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  React.useEffect(() => {\r\n    setName(currentUser.name);\r\n    setDescription(currentUser.about);\r\n  }, [currentUser])\r\n\r\n  function handleSubmit(e) {\r\n    // Запрещаем браузеру переходить по адресу формы\r\n    e.preventDefault();\r\n  \r\n    // Передаём значения управляемых компонентов во внешний обработчик\r\n    onUpdateUser({\r\n      name,\r\n      about: description,\r\n    });\r\n  } \r\n\r\n  return (\r\n    <PopupWithForm \r\n        name=\"edit\"\r\n        title=\"Редактировать профиль\"\r\n        isOpen={isOpen}\r\n        onClose={onClose}\r\n        handleSubmit={handleSubmit}\r\n        buttonSubmitText={'Отправить'}>\r\n          <input \r\n            minLength=\"2\" \r\n            maxLength=\"40\" \r\n            type=\"text\" \r\n            className=\"popup__input popup__input_name_name\" \r\n            name=\"name\" \r\n            id=\"name-input\" \r\n            placeholder=\"Имя\" \r\n            defaultValue=\"Максим Хорс\" \r\n            onChange={(evt) => setName(evt.target.value)}\r\n            required\r\n            value={name} />\r\n          <span \r\n            className='popup__input-error popup__input-error_active' \r\n            id='name-input-error' />\r\n          <input \r\n            minLength=\"2\" \r\n            maxLength=\"200\" \r\n            type=\"text\" \r\n            className=\"popup__input popup__input_name_profession\" \r\n            name=\"profession\" \r\n            placeholder=\"Вид деятельности\" \r\n            id=\"profession-input\" \r\n            defaultValue=\"Конный спортсмен\" \r\n            onChange={(evt) => setDescription(evt.target.value)}\r\n            required\r\n            value={description} />\r\n          <span \r\n            className='popup__input-error popup__input-error_active' \r\n            id='profession-input-error' />\r\n        </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditProfilePopup;","import PopupWithForm from './PopupWithForm';\r\nimport React from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction EditAvatarPopup({isOpen, onClose, onUpdateAvatar}) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  const avatarInput = React.useRef();\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n  \r\n    onUpdateAvatar({\r\n      avatar: avatarInput.current.value\r\n    });\r\n  } \r\n\r\n  React.useEffect(() => {\r\n    avatarInput.current.value = currentUser.avatar;\r\n  }, [currentUser]);\r\n\r\n  return (\r\n    <PopupWithForm \r\n        name=\"avatar\"\r\n        title=\"Обновить аватар\"\r\n        children=\"\"\r\n        isOpen={isOpen}\r\n        onClose={onClose}\r\n        handleSubmit={handleSubmit}\r\n        buttonSubmitText={'Сохранить'}>\r\n          <input \r\n            type=\"url\" \r\n            placeholder=\"Ссылка на картинку\" \r\n            className=\"popup__input popup__input_name_link-avatar\" \r\n            name=\"avatar-input\" \r\n            id=\"avatar-input\" \r\n            required\r\n            ref={avatarInput}\r\n          />\r\n          <span \r\n            className='popup__input-error' \r\n            id='avatar-input-error'>Заполните это поле.</span>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditAvatarPopup;","import PopupWithForm from './PopupWithForm';\r\nimport React from 'react';\r\n\r\nfunction AddPlacePopup({isOpen, onClose, onAddPlace}) {\r\n  const nameInput = React.useRef();\r\n  const linkInput = React.useRef();\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n\r\n    // Передаём значения управляемых компонентов во внешний обработчик\r\n    onAddPlace({\r\n      name: nameInput.current.value,\r\n      link: linkInput.current.value\r\n    });\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm \r\n      name=\"add\"\r\n      title=\"Новое место\"\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      handleSubmit={handleSubmit}\r\n      buttonSubmitText={'Создать'}>\r\n        <input \r\n          ref={nameInput}\r\n          minLength=\"1\" \r\n          maxLength=\"30\" \r\n          type=\"text\" \r\n          placeholder=\"Название\" \r\n          className=\"popup__input popup__input_name_title-card\" \r\n          name=\"title-card\" \r\n          id=\"title-input\" \r\n          required />\r\n        <span \r\n          className='popup__input-error' \r\n          id='title-input-error'>Вы пропустили это поле.</span>\r\n        <input \r\n          ref={linkInput}\r\n          type=\"url\" \r\n          placeholder=\"Ссылка на картинку\" \r\n          className=\"popup__input popup__input_name_link-card\" \r\n          name=\"link-card\" \r\n          id=\"link-input\" \r\n          required />\r\n        <span \r\n          className='popup__input-error' \r\n          id='link-input-error'>Вы пропустили это поле.</span>\r\n    </PopupWithForm>\r\n  )\r\n}\r\n\r\nexport default AddPlacePopup;","import React from 'react';\r\n\r\nfunction Login({authorization}) {\r\n  const [valueEmail, setValueEmail] = React.useState('');\r\n  const [valuePassword, setValuePassword] = React.useState('');\r\n\r\n  function handleChangeEmail(e) {\r\n    setValueEmail(e.target.value);\r\n  }\r\n\r\n  function handleChangePassword(e) {\r\n    setValuePassword(e.target.value);\r\n  }\r\n\r\n  function handleSubmit(e){\r\n    e.preventDefault()\r\n    const email = valueEmail;\r\n    const password = valuePassword;\r\n\r\n    authorization(email,password);\r\n  }\r\n\r\n  return (\r\n    <section className=\"start-screen\">\r\n      <h1 className=\"start-screen__title\">Вход</h1>\r\n      <form onSubmit={handleSubmit} className=\"start-screen__form\">\r\n        <input value={valueEmail} type=\"email\" className=\"start-screen__input\" placeholder=\"Email\" onChange={handleChangeEmail}/>\r\n        <input value={valuePassword} type=\"password\" className=\"start-screen__input\" placeholder=\"Пароль\" onChange={handleChangePassword}/>\r\n        <button className=\"start-screen__submit\">Войти</button>\r\n      </form>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default Login;","import React from 'react';\r\nimport { Link } from 'react-router-dom'; \r\n\r\nfunction Register({registration}) {\r\n  const [valueEmail, setValueEmail] = React.useState('');\r\n  const [valuePassword, setValuePassword] = React.useState('');\r\n\r\n  function handleChangeEmail(e) {\r\n    setValueEmail(e.target.value);\r\n  }\r\n\r\n  function handleChangePassword(e) {\r\n    setValuePassword(e.target.value);\r\n  }\r\n\r\n  function handleSubmit(e){\r\n    e.preventDefault()\r\n    const email = valueEmail;\r\n    const password = valuePassword;\r\n    registration(email, password)\r\n  } \r\n\r\n  return (\r\n    <section className=\"start-screen\">\r\n      <h1 className=\"start-screen__title\">Регистрация</h1>\r\n      <form onSubmit={handleSubmit} className=\"start-screen__form\">\r\n        <input value={valueEmail} type=\"email\" className=\"start-screen__input\" placeholder=\"Email\" onChange={handleChangeEmail}/>\r\n        <input value={valuePassword} type=\"password\" className=\"start-screen__input\" placeholder=\"Пароль\" onChange={handleChangePassword}/>\r\n        <button className=\"start-screen__submit\">Зарегистрироваться</button>\r\n      </form>\r\n      <Link className=\"start-screen__login\" to=\"/sign-in\">Уже зарегистрированы? Войти</Link>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default Register;","function Footer() {\r\n  return (\r\n    <footer className=\"footer\">\r\n      <p className=\"footer__copyright\">© 2020 Mesto Russia</p>\r\n    </footer>\r\n  );\r\n}\r\n\r\nexport default Footer;","import React from 'react';\r\nimport Footer from './Footer';\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\nconst ProtectedRoute = ({ component: Component, ...props  }) => {\r\n\r\n  return (\r\n    <Route>\r\n      <>\r\n        { \r\n          props.loggedIn ? <Component {...props} /> : <Redirect to=\"/sign-in\" />\r\n        }\r\n        <Footer />\r\n      </>\r\n    </Route>\r\n)}\r\n\r\nexport default ProtectedRoute; ","class Api {\r\n  constructor({baseUrl, headers}){\r\n    this._baseUrl = baseUrl;\r\n    this._headers = headers;\r\n  }\r\n\r\n  // Получить начальные карточки\r\n  getInitialCards() {\r\n    return fetch(`${this._baseUrl}/cards`, {headers: this._headers})\r\n    .then(response => this._checkRequestResult(response));\r\n  }\r\n\r\n  // Добавление новой карточки на сервер\r\n  addCard(name, link) {\r\n    return fetch(`${this._baseUrl}/cards`, {\r\n      method: 'POST',\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        name: name,\r\n        link: link\r\n      })\r\n    })\r\n    .then(response => this._checkRequestResult(response));\r\n  }\r\n\r\n  // Удалить карточку\r\n  deleteCard(cardId) {\r\n    return fetch(`${this._baseUrl}/cards/${cardId}`, {\r\n      method: 'DELETE',\r\n      headers: this._headers,\r\n    })\r\n    .then(response => this._checkRequestResult(response));\r\n  }\r\n\r\n  // Постановка лайка карточке\r\n  likeCard(cardId) {\r\n    return fetch(`${this._baseUrl}/cards/likes/${cardId}`, {\r\n      method: 'PUT',\r\n      headers: this._headers,\r\n    })\r\n    .then(response => this._checkRequestResult(response));\r\n  }\r\n\r\n  // Удаление лайка карточке\r\n  unlikeCard(cardId) {\r\n    return fetch(`${this._baseUrl}/cards/likes/${cardId}`, {\r\n      method: 'DELETE',\r\n      headers: this._headers,\r\n    })\r\n    .then(response => this._checkRequestResult(response));\r\n  }\r\n  \r\n  // Получить данные пользователя\r\n  getUserInfo() {\r\n    return fetch(`${this._baseUrl}/users/me`, {headers: this._headers})\r\n    .then(response => this._checkRequestResult(response));\r\n  }\r\n\r\n  // Отредактировать данные пользователя\r\n  editUserInfo(name, profession) {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      method: 'PATCH',\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        name: name,\r\n        about: profession\r\n      })\r\n    })\r\n    .then(response => this._checkRequestResult(response));\r\n  }\r\n\r\n  // Отредактировать аватар пользователя\r\n  editUserAvatar(urlAvatar) {\r\n    console.log(urlAvatar);\r\n    return fetch(`${this._baseUrl}/users/me/avatar`, {\r\n      method: 'PATCH',\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        avatar: urlAvatar\r\n      })\r\n    })\r\n    .then(response => this._checkRequestResult(response));\r\n  }\r\n\r\n  _checkRequestResult(response) {\r\n    if (response.ok) {\r\n      return response.json();\r\n    }\r\n    return Promise.reject(`Возникла ошибка: ${response.status}`); \r\n  }\r\n\r\n  errorHandler(error) {\r\n    console.log(error);\r\n  }\r\n\r\n  updateHeaders() {\r\n    this._headers = {\r\n      'Content-Type': 'application/json',\r\n      'Authorization': `${localStorage.getItem('jwt')}`,\r\n    }\r\n  }\r\n\r\n}\r\n\r\nconst api = new Api({\r\n  baseUrl: 'https://api.mesto-mpozharskiy.students.nomoredomains.rocks',\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n    'Authorization': `${localStorage.getItem('jwt')}`,\r\n  }\r\n}); \r\n\r\nexport default api;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","function InfoTooltip ({onClose, isOpen, message}) {\r\n\r\n  return (\r\n    <div className={`popup popup_type_infotool ${isOpen ? 'popup_opened' : ''}`}>\r\n      <div className=\"popup__container\">\r\n        <img src={message.iconPath} alt=\"\" className=\"popup__result-icon\" />\r\n        <p className=\"popup__title-info\">{message.text}</p>\r\n        <button type=\"button\" className=\"popup__button-close\" onClick={onClose} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default InfoTooltip ;","import api from './api';\r\nexport const BASE_URL = 'https://api.mesto-mpozharskiy.students.nomoredomains.rocks';\r\n\r\nexport const register = (email, password) => {\r\n  return fetch(`${BASE_URL}/signup`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({email, password})\r\n  })\r\n}; \r\n\r\nexport const authorize = (email, password) => {\r\n  return fetch(`${BASE_URL}/signin`, {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify({ email, password })\r\n  })\r\n  .then((res) => {\r\n    if (res.status === 400) {\r\n      throw new Error('Не все поля заполнены');\r\n    } else if (res.status === 401) {\r\n      throw new Error('Email не зарегистрирован');\r\n    } else return res.json();\r\n  })\r\n  .then((data) => {\r\n    console.log(data)\r\n    if (data.token) {\r\n      localStorage.setItem('jwt', data.token);\r\n      api.updateHeaders();\r\n      return data.token;\r\n    }\r\n  })\r\n}\r\n\r\nexport const getContent = (token) => {return fetch(`${BASE_URL}/users/me`, {\r\n  method: 'GET',\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n    'Authorization': `${token}`,\r\n  },\r\n})\r\n  .then((res) => {\r\n    return res.json()\r\n  })\r\n  .then((data) => data)\r\n}\r\n","export default __webpack_public_path__ + \"static/media/registration-ok.1b6082f8.svg\";","export default __webpack_public_path__ + \"static/media/login-fail.df8eddf6.svg\";","import React, { useEffect } from 'react';\r\nimport Header from './Header';\r\nimport Main from './Main';\r\nimport ImagePopup from './ImagePopup';\r\nimport EditProfilePopup from './EditProfilePopup';\r\nimport EditAvatarPopup from './EditAvatarPopup';\r\nimport AddPlacePopup from './AddPlacePopup';\r\nimport Login from './Login';\r\nimport Register from './Register';\r\nimport ProtectedRoute from './ProtectedRoute';\r\nimport api from '../utils/api';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport { Route, Redirect, Switch, useHistory } from 'react-router-dom';\r\nimport InfoTooltip from './InfoTooltip';\r\nimport * as Auth from '../utils/auth';\r\nimport registrationOk from '../images/registration-ok.svg';\r\nimport registrationNoOK from '../images/login-fail.svg';\r\nconst escapeHtml = require('escape-html')\r\n\r\nfunction App() {\r\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\r\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\r\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\r\n  const [isInfoTooltipPopupOpen, setIsInfoTooltipPopupOpen] = React.useState(false);\r\n  const [selectedCard, setSelectedCard] = React.useState(false);\r\n  const [currentUser, setCurrentUser] = React.useState({_id: null, avatar: ''});\r\n  const [loggedIn, setLoggedIn] = React.useState(false);\r\n  const [message, setMessage] = React.useState({ iconPath: '', text: '' });\r\n  const [email, setEmail] = React.useState('');\r\n  const history = useHistory();\r\n\r\n\r\n  React.useEffect(() => {\r\n    api.getUserInfo().then((user) => setCurrentUser(user.data))\r\n    .catch(error => api.errorHandler(error));\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    const jwt = localStorage.getItem('jwt');\r\n    if (jwt) {\r\n      Auth.getContent(jwt)\r\n        .then((res) => {\r\n          setLoggedIn(true);\r\n          setEmail(res.data.email);\r\n          history.push('/');\r\n        })\r\n        .catch(err => console.log(err));\r\n    }\r\n  }, [history]);\r\n\r\n\r\n  function handleEditAvatarClick() {\r\n    setIsEditAvatarPopupOpen(true);\r\n  }\r\n  function handleEditProfileClick() {\r\n    setIsEditProfilePopupOpen(true);\r\n  }\r\n  function handleAddPlaceClick() {\r\n    setIsAddPlacePopupOpen(true);\r\n  }\r\n  function handleCardClick(card) {\r\n    setSelectedCard(card);\r\n  }\r\n  function handleInfoTooltipPopupOpen() {\r\n    setIsInfoTooltipPopupOpen(true);\r\n  }\r\n  function handleInfoTooltipContent({iconPath, text}) {\r\n    setMessage({ iconPath: iconPath, text: text })\r\n  }\r\n\r\n  function closeAllPopups() {\r\n    setIsEditAvatarPopupOpen(false);\r\n    setIsEditProfilePopupOpen(false);\r\n    setIsAddPlacePopupOpen(false);\r\n    setSelectedCard(false);\r\n    setIsInfoTooltipPopupOpen(false);\r\n  }\r\n\r\n  function handleUpdateUser({name, about}) {\r\n    api.editUserInfo(name, about).then(() => {\r\n      const updatedUser = { ...currentUser };\r\n        updatedUser.name = name;\r\n        updatedUser.about = about;\r\n\r\n        setCurrentUser({ ...updatedUser });\r\n      setIsEditProfilePopupOpen(false);\r\n    })\r\n    .catch(error => api.errorHandler(error));\r\n  }\r\n\r\n  function handleUpdateAvatar({avatar}) {\r\n    api.editUserAvatar(avatar).then((updatedUser) => {\r\n      setCurrentUser(updatedUser);\r\n      setIsEditAvatarPopupOpen(false);\r\n      console.log(updatedUser);\r\n    })\r\n    .catch(error => api.errorHandler(error));\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    api.getInitialCards().then(cardList => {\r\n      setCards(cardList);\r\n    })\r\n    .catch(error => api.errorHandler(error))\r\n  }, []);\r\n\r\n  // Карточки\r\n  const [cards, setCards] = React.useState([]);\r\n\r\n  function handleCardLike(card) {\r\n    // Проверяем, есть ли уже лайк на этой карточке\r\n    const isLiked = card.likes.some(i => i === currentUser._id);\r\n    // Отправляем запрос в API и получаем обновлённые данные карточки\r\n    const changeLike = isLiked ? api.unlikeCard(card._id) : api.likeCard(card._id)\r\n    changeLike.then((newCard) => {\r\n      // Формируем новый массив на основе имеющегося, подставляя в него новую карточку\r\n      const newCards = cards.map((c) => c._id === card._id ? newCard : c);\r\n      // Обновляем стейт\r\n      setCards(newCards);\r\n    })\r\n    .catch(error => api.errorHandler(error));\r\n  }\r\n\r\n  function handleCardDelete(card) {\r\n    api.deleteCard(card._id).then(() => {\r\n      const newCards = cards.filter((c) => c._id !== card._id);\r\n      setCards(newCards);\r\n    })\r\n    .catch(error => api.errorHandler(error));\r\n  }\r\n\r\n  function handleAddPlaceSubmit({name, link}) {\r\n    api.addCard(name, link).then((card) => {\r\n      setCards([card.data, ...cards]);\r\n      setIsAddPlacePopupOpen(false);\r\n    })\r\n    .catch(error => api.errorHandler(error));\r\n  }\r\n\r\n  useEffect(() => {\r\n    function hadleEscClose(evt) {\r\n      if (evt.key === \"Escape\") {\r\n        closeAllPopups();\r\n      }\r\n    }\r\n\r\n    document.addEventListener('keydown', hadleEscClose);\r\n    return () => {\r\n      document.removeEventListener('keydown', hadleEscClose);\r\n    }\r\n  }, []);\r\n  // Регистрация\r\n  function registration(email, password) {\r\n    Auth.register(email, escapeHtml(password)).then((res) => {\r\n      if(res.status === 201){\r\n        handleInfoTooltipContent({iconPath: registrationOk, text: 'Вы успешно зарегистрировались!'})\r\n        handleInfoTooltipPopupOpen();\r\n        // Перенаправляем на страницу логина спустя 3сек и закрываем попап\r\n        setTimeout(history.push, 3000, \"/sign-in\");\r\n        setTimeout(closeAllPopups, 2500);\r\n      }\r\n      if(res.status === 400) {\r\n        console.log('Введный емейл ужезарегестрирован')\r\n      }\r\n    }).catch((err)=> {\r\n      handleInfoTooltipContent({iconPath: registrationNoOK, text: 'Что-то пошло не так! Попробуйте ещё раз.'})\r\n      handleInfoTooltipPopupOpen();\r\n      setTimeout(closeAllPopups, 2500);\r\n      console.log(err)\r\n    })\r\n  }\r\n  // Авторизация \r\n  function authorization(email, password) {\r\n    Auth.authorize(email, escapeHtml(password) )\r\n    .then((data) => {\r\n      if (!data) {\r\n        throw new Error('Произошла ошибка');\r\n      }\r\n      Auth.getContent(data)\r\n        .then((res) => {\r\n          setEmail(res.data.email);\r\n        }).catch(err => console.log(err));\r\n        setLoggedIn(true);\r\n\r\n        api.getUserInfo().then((user) => setCurrentUser(user.data))\r\n        .catch(error => api.errorHandler(error));\r\n        \r\n        \r\n        handleInfoTooltipContent({iconPath: registrationOk, text: 'Вы успешно авторизовались!'})\r\n        handleInfoTooltipPopupOpen();\r\n        // Перенаправляем на главную страницу спустя 3сек и закрываем попап\r\n        setTimeout(history.push, 3000, \"/\");\r\n        setTimeout(closeAllPopups, 2500);\r\n    }).catch((err) => {\r\n      handleInfoTooltipContent({iconPath: registrationNoOK, text: 'Что то пошло не так!'})\r\n      handleInfoTooltipPopupOpen();\r\n      console.log(err)\r\n    })\r\n  }\r\n\r\n  // Выход из учетки\r\n  function handleSignOut() {\r\n    setCurrentUser({_id: null, avatar: ''})\r\n    setLoggedIn(false);\r\n    localStorage.removeItem('jwt');\r\n    api.updateHeaders();\r\n    setEmail('');\r\n    history.push('/sign-in');\r\n  }\r\n\r\n  return (\r\n    <CurrentUserContext.Provider value={currentUser}>\r\n      <div className=\"page\">\r\n        <Header loggedIn={loggedIn} email={email} handleSignOut={handleSignOut} />\r\n        <Switch>\r\n          {currentUser._id && <ProtectedRoute exact path=\"/\" loggedIn={loggedIn} component={Main} // Рендерим элемент только после того как пришел ответ от React.useEffect\r\n            onEditProfile={handleEditProfileClick} \r\n            onAddPlace={handleAddPlaceClick} \r\n            onEditAvatar={handleEditAvatarClick}\r\n            onCardClick={handleCardClick}\r\n            cards={cards}\r\n            onCardLike={handleCardLike}\r\n            onCardDelete={handleCardDelete}\r\n          />}\r\n          <Route path=\"/sign-in\">\r\n            <Login \r\n              authorization={authorization}\r\n            />\r\n          </Route>\r\n          <Route path=\"/sign-up\">\r\n            <Register \r\n              registration={registration}\r\n            />\r\n          </Route>\r\n          <Route path=\"/\">\r\n            {loggedIn ? <Redirect to=\"/\" /> : <Redirect to=\"/sign-in\" />}\r\n          </Route>\r\n        </Switch>\r\n      </div>\r\n      {currentUser &&\r\n        <EditProfilePopup \r\n          isOpen={isEditProfilePopupOpen} \r\n          onClose={closeAllPopups} \r\n          onUpdateUser={handleUpdateUser}\r\n          /> \r\n      }\r\n      <AddPlacePopup\r\n        isOpen={isAddPlacePopupOpen}\r\n        onClose={closeAllPopups}\r\n        onAddPlace={handleAddPlaceSubmit}\r\n      />\r\n      {currentUser &&\r\n        <EditAvatarPopup \r\n          isOpen={isEditAvatarPopupOpen} \r\n          onClose={closeAllPopups}\r\n          onUpdateAvatar={handleUpdateAvatar}   \r\n        /> \r\n      }\r\n      <ImagePopup \r\n        card={selectedCard} \r\n        onClose={closeAllPopups}\r\n      />\r\n      {currentUser &&\r\n          <InfoTooltip\r\n            isOpen={isInfoTooltipPopupOpen} \r\n            onClose={closeAllPopups} \r\n            message={message}\r\n          /> \r\n        }\r\n    </CurrentUserContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}